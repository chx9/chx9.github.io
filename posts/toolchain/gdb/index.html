<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>gdb | chx9</title>
<meta name="keywords" content="">
<meta name="description" content="start命令 在GDB中，start 命令用于启动程序并停在程序的入口点处，等待你进行调试。它相当于设置一个断点在程序的 main 函数上并运行程序。这使你可以在程序开始执行之前检查变量、设置断点以及做其他调试操作。 以下是 start 命令的用法，其中 [args] 是传递给程序的命令行参数（ start [args] gdb启动的时候指定">
<meta name="author" content="chx9">
<link rel="canonical" href="https://www.junshou.top/posts/toolchain/gdb/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.css" rel="preload stylesheet" as="style">
<script defer crossorigin="anonymous" src="/assets/js/highlight.js" onload="hljs.initHighlightingOnLoad();"></script>
<link rel="icon" href="https://www.junshou.top/img/svin.webp">
<link rel="icon" type="image/png" sizes="16x16" href="https://www.junshou.top/img/svin.webp">
<link rel="icon" type="image/png" sizes="32x32" href="https://www.junshou.top/img/svin.webp">
<link rel="apple-touch-icon" href="https://www.junshou.top/img/svin.webp">
<link rel="mask-icon" href="https://www.junshou.top/img/svin.webp">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
</noscript>
<script defer src="https://unpkg.com/mermaid@8.8.1/dist/mermaid.min.js"></script>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css">
<script src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
<script src="https://cdn.jsdelivr.net/npm/jquery@3.6.3/dist/jquery.min.js"></script>



<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = ""; 
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>
<meta property="og:title" content="gdb" />
<meta property="og:description" content="start命令 在GDB中，start 命令用于启动程序并停在程序的入口点处，等待你进行调试。它相当于设置一个断点在程序的 main 函数上并运行程序。这使你可以在程序开始执行之前检查变量、设置断点以及做其他调试操作。 以下是 start 命令的用法，其中 [args] 是传递给程序的命令行参数（ start [args] gdb启动的时候指定" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://www.junshou.top/posts/toolchain/gdb/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-08-11T21:48:16+08:00" />
<meta property="article:modified_time" content="2023-08-11T21:48:16+08:00" />

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="gdb"/>
<meta name="twitter:description" content="start命令 在GDB中，start 命令用于启动程序并停在程序的入口点处，等待你进行调试。它相当于设置一个断点在程序的 main 函数上并运行程序。这使你可以在程序开始执行之前检查变量、设置断点以及做其他调试操作。 以下是 start 命令的用法，其中 [args] 是传递给程序的命令行参数（ start [args] gdb启动的时候指定"/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [

        {
          "@type": "ListItem",
          "position":  1 ,
          "name": "📚Articles",
          "item": "https://www.junshou.top/posts/"
        },

        {
          "@type": "ListItem",
          "position":  2 ,
          "name": "🛠️ toolchain",
          "item": "https://www.junshou.top/posts/toolchain/"
        }, 
    {
      "@type": "ListItem",
      "position":  3 ,
      "name": "gdb",
      "item": "https://www.junshou.top/posts/toolchain/gdb/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "gdb",
  "name": "gdb",
  "description": "start命令 在GDB中，start 命令用于启动程序并停在程序的入口点处，等待你进行调试。它相当于设置一个断点在程序的 main 函数上并运行程序。这使你可以在程序开始执行之前检查变量、设置断点以及做其他调试操作。 以下是 start 命令的用法，其中 [args] 是传递给程序的命令行参数（ start [args] gdb启动的时候指定",
  "keywords": [
    ""
  ],
  "articleBody": "start命令 在GDB中，start 命令用于启动程序并停在程序的入口点处，等待你进行调试。它相当于设置一个断点在程序的 main 函数上并运行程序。这使你可以在程序开始执行之前检查变量、设置断点以及做其他调试操作。\n以下是 start 命令的用法，其中 [args] 是传递给程序的命令行参数（\nstart [args] gdb启动的时候指定参数 一种方法是在 gdb 启动程序的同时直接指定参数。格式如下\ngdb --args your_program arg1 arg2 arg3... 另一种方法是在gdb中设置\n首先启动 gdb 并加载你的程序。例如，如果你的程序名为 myprogram，则运行：\ngdb myprogram 在 gdb 提示符下，使用 set args 命令设置参数。例如，如果你想将 arg1 和 arg2 作为参数传递给你的程序，你应该运行：\n(gdb) set args arg1 arg2 现在，当你使用 run 命令开始执行程序时，它将使用你指定的参数。你可以使用 show args 命令查看当前设置的参数：\n(gdb) show args Argument list to give program being debugged when it is started is \"arg1 arg2\". run (r) 运行程序\nr(un) break (b) 设置断点\nb(reak) main next (n) 执行下一行代码\nn(ext) list (l) 显示源代码\nl(ist) up 进入上一级函数的上下文\nup down 进入下一级函数的上下文\ndown display/undisplay 每次步进时显示或取消显示变量的值\ndisplay variable_name undisplay variable_name backtrace (bt) 显示函数调用堆栈\nbt(acktrace) step 单步进入函数\ns(tep) continue 继续执行直到下一个断点\n``` c(ontinue) ``` finish 执行完当前函数并停在调用该函数的位置\n``` finish ``` watch 监视变量的值是否发生变化\n``` watch variable_name ``` info breakpoints 显示当前设置的断点信息\n``` info breakpoints ``` delete 删除指定断点\n``` delete breakpoint_number ``` reverse-next (rn) 反向执行到上一行\n``` reverse-next ``` set var 设置变量的值\n``` set var x = new_value ``` print (p) 打印变量的值\narduinoCopy code print variable_name info locals 显示当前函数的局部变量\ninfo locals info args 显示当前函数的参数\ninfo args set breakpoint condition 设置断点的触发条件\nbreak main if condition disable/enable breakpoints 禁用/启用断点\ndisable breakpoint_number enable breakpoint_number ignore breakpoint 设置忽略断点的次数\nignore breakpoint_number count tbreak (tb) 在单次执行后自动移除断点\ntbreak function_name info frame 显示当前栈帧的信息\ninfo frame info registers 显示寄存器的内容\ninfo registers set $register = value 设置寄存器的值\n``` set $rax = 42 ``` x 以不同的格式显示内存内容\n``` x/4xw memory_address ``` info threads 显示所有线程的信息\n``` info threads ``` thread 切换到指定线程的上下文\n``` thread thread_number ``` set pagination off/on 关闭/打开分页显示\n``` set pagination off ``` attach 附加到正在运行的进程\n``` attach process_id ``` detach 从正在调试的进程中分离\n``` detach ``` info functions 显示可用函数的列表\n``` info functions ``` 发生段错误如何调试 段错误（Segmentation fault），通常也被称为 Sigsegv，是一种特定的错误条件，表示一个程序试图访问的内存区域并未被分配给它，或者只读。这通常是由于编程错误引起的，比如在 C/C++ 中，非法指针解引用、数组越界、堆栈溢出等情况可能触发段错误。\n解决段错误的关键步骤如下：\n1. 定位错误\n你可以使用各种工具来帮助定位引发段错误的代码行，如 GDB、Valgrind 等。\n对于 GDB，你可以这样使用：\ngdb your-program run 当段错误发生时，使用 backtrace 或 bt 命令查看调用堆栈。\n2. 检查可能的原因\n非法指针解引用：你是否有指针没有初始化就使用，或者指针已经释放后又使用？ 数组越界：你是否访问了数组的边界之外？ 堆栈溢出：你是否在栈上申请了大量的内存？ 3. 修复问题\n找到问题后，修复相应的代码。例如，对于空指针解引用，你需要检查指针是否为空，然后再进行操作。如果是数组越界，确定你的索引或计数器在正确范围内。\n4. 测试\n修复后，重新编译并运行你的程序，确认问题是否已经解决。\n以上步骤并不保证能解决所有的段错误，但是至少能帮你找到出错的地方，并且提供一些可能的解决方案。碰到棘手的问题时，不要忘记寻求同事或者网络社区的帮助。\ngdb如何调试多线程程序 要使用 GDB 调试这个多线程程序，需要以下步骤:\n先编译你的程序并包含调试信息。你可以用 -g 参数来做到这一点： g++ -g -std=c++11 multithread.cpp -o multithread -pthread 然后，启动 GDB 并加载你的程序： gdb ./multithread 在 main 函数或者 worker 函数开始处设置断点。比如我们在 worker 函数设置断点，执行如下命令： (gdb) break worker 开始运行你的程序： (gdb) run 当程序停在断点时，你可以查看所有的线程： (gdb) info threads 这会列出所有的线程及其状态。每个线程都有一个唯一的 ID，你可以用这个 ID 来切换不同的线程，例如，切换到线程 2： (gdb) thread 2 你可以使用 next, step, continue 等命令在选定的线程中进行单步调试，或查看堆栈信息： bt ",
  "wordCount" : "1545",
  "inLanguage": "en",
  "datePublished": "2023-08-11T21:48:16+08:00",
  "dateModified": "2023-08-11T21:48:16+08:00",
  "author":[{
    "@type": "Person",
    "name": "chx9"
  }],
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://www.junshou.top/posts/toolchain/gdb/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "chx9",
    "logo": {
      "@type": "ImageObject",
      "url": "https://www.junshou.top/img/svin.webp"
    }
  }
}
</script>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://www.junshou.top/" accesskey="h" title="chx9 (Alt + H)">chx9</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                         fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                         stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                         fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                         stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="https://www.junshou.top/search" title="🔍 search (Alt &#43; /)" accesskey=/>
                <span>🔍 search</span>
                </a>
            </li>
            <li>
                <a href="https://www.junshou.top/" title="🏠 home">
                <span>🏠 home</span>
                </a>
            </li>
            <li>
                <a href="https://www.junshou.top/posts" title="📚 articles">
                <span>📚 articles</span>
                </a>
            </li>
            <li>
                <a href="https://www.junshou.top/tags" title="🧩 tags">
                <span>🧩 tags</span>
                </a>
            </li>
            <li>
                <a href="https://www.junshou.top/about" title="🙋🏻‍♂️ about">
                <span>🙋🏻‍♂️ about</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main page">
<style>
    i[id*="post_meta_style"] {
        display: flex;
        align-items: center;
        margin: 0 0 10px 0;
    }
</style>

<article class="post-single">
    <div id="single-content">
        <header class="post-header">
            <div class="breadcrumbs"><a href="https://www.junshou.top/">🏠 主页</a>&nbsp;»&nbsp;<a href="https://www.junshou.top/posts/">📚Articles</a>&nbsp;»&nbsp;<a href="https://www.junshou.top/posts/toolchain/">🛠️ toolchain</a></div>
            <h1 class="post-title">
                gdb
            </h1>
            <div class="post-meta">

<style>
    i[id*="post_meta_style"] {
        display: flex;
        align-items: center;
        margin: 0 0 10px 0;
    }

    .parent-post-meta {
        display: flex;
        flex-wrap: wrap;
        opacity: 0.8;
    }
</style>

<span class="parent-post-meta">
    <span id="post_meta_style_1">
        <span class="fa fa-calendar-check-o"></span>
        <span>2023-08-11
            &nbsp;&nbsp;
        </span>
    </span>
    
    
    
    
    
    
    
    <span id="post_meta_style_3">
        <span class="fa fa-file-word-o"></span>
        <span>1545字
            &nbsp;&nbsp;
        </span>
    </span>
    <span id="post_meta_style_4">
        <span class="fa fa-clock-o"></span>
        <span>4分钟
            &nbsp;&nbsp;
        </span>
    </span>
    <span id="post_meta_style_5">
        <span class="fa fa-user-o"></span>
        <span>chx9
            &nbsp;&nbsp;
        </span>
    </span>
    <span id="post_meta_style_6">
        <span class="fa fa-tags" style="opacity: 0.8"></span>
        <span>
            <span class="post-tags-meta">
            </span>
        </span>
    </span>
</span>
<span style="opacity: 0.8;">
                    <span id="post_meta_style_7">
                        &nbsp;&nbsp;
                        <span class="fa fa-eye" ></span>
                        <span>
                            <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv"></span></span>
                            &nbsp;&nbsp;
                        </span>
                    </span>
                    <span id="post_meta_style_8">
                        <span class="fa fa-commenting-o"></span>
                        <span>
                            <script src="https://cdn.staticfile.org/twikoo//twikoo.all.min.js"></script>
                            <script>
                                let url = document.documentURI
                                
                                let dnsUrl = "https://www.junshou.top/"
                                let urlSplit = url.split(dnsUrl)
                                let finalUrl = urlSplit[1]
                                if (finalUrl[0] !== '/') {
                                    finalUrl = '/'+finalUrl
                                }
                                twikoo.getCommentsCount({
                                    envId:  null , 
                                region:  null , 
                                urls: [ 
                                    
                                    finalUrl,
                                ],
                                    includeReply: false 
                                }).then(function (res) {
                                    let count = res[0].count
                                    const obj = document.getElementById("comment_count");
                                    obj.innerText = count
                                    
                                    
                                    
                                }).catch(function (err) {
                                    
                                    console.error(err);
                                });
                            </script>
                            <span id="comment_count"></span>
                        </span>
                    </span>
                </span>

</div>
        </header> <aside id="toc-container" class="toc-container wide">
    <div class="toc">
        <details  open>
        <summary accesskey="c" title="(Alt + C)">
            <span class="details">目录</span>
        </summary>

        <div class="inner"><ul>
                <li>
                    <a href="#start%e5%91%bd%e4%bb%a4" aria-label="start命令">start命令</a></li>
                <li>
                    <a href="#gdb%e5%90%af%e5%8a%a8%e7%9a%84%e6%97%b6%e5%80%99%e6%8c%87%e5%ae%9a%e5%8f%82%e6%95%b0" aria-label="gdb启动的时候指定参数">gdb启动的时候指定参数</a></li>
                <li>
                    <a href="#run-r" aria-label="run (r)"><strong>run (r)</strong></a></li>
                <li>
                    <a href="#break-b" aria-label="break (b)"><strong>break (b)</strong></a></li>
                <li>
                    <a href="#next-n" aria-label="next (n)"><strong>next (n)</strong></a></li>
                <li>
                    <a href="#list-l" aria-label="list (l)"><strong>list (l)</strong></a></li>
                <li>
                    <a href="#up" aria-label="up"><strong>up</strong></a></li>
                <li>
                    <a href="#down" aria-label="down"><strong>down</strong></a></li>
                <li>
                    <a href="#displayundisplay" aria-label="display/undisplay"><strong>display/undisplay</strong></a></li>
                <li>
                    <a href="#backtrace-bt" aria-label="backtrace (bt)"><strong>backtrace (bt)</strong></a></li>
                <li>
                    <a href="#step" aria-label="step"><strong>step</strong></a></li>
                <li>
                    <a href="#continue" aria-label="continue"><strong>continue</strong></a></li>
                <li>
                    <a href="#finish" aria-label="finish"><strong>finish</strong></a></li>
                <li>
                    <a href="#watch" aria-label="watch"><strong>watch</strong></a></li>
                <li>
                    <a href="#info-breakpoints" aria-label="info breakpoints"><strong>info breakpoints</strong></a></li>
                <li>
                    <a href="#delete" aria-label="delete"><strong>delete</strong></a></li>
                <li>
                    <a href="#reverse-next-rn" aria-label="reverse-next (rn)"><strong>reverse-next (rn)</strong></a></li>
                <li>
                    <a href="#set-var" aria-label="set var"><strong>set var</strong></a></li>
                <li>
                    <a href="#print-p" aria-label="print (p)"><strong>print (p)</strong></a></li>
                <li>
                    <a href="#info-locals" aria-label="info locals"><strong>info locals</strong></a></li>
                <li>
                    <a href="#info-args" aria-label="info args"><strong>info args</strong></a></li>
                <li>
                    <a href="#set-breakpoint-condition" aria-label="set breakpoint condition"><strong>set breakpoint condition</strong></a></li>
                <li>
                    <a href="#disableenable-breakpoints" aria-label="disable/enable breakpoints"><strong>disable/enable breakpoints</strong></a></li>
                <li>
                    <a href="#ignore-breakpoint" aria-label="ignore breakpoint"><strong>ignore breakpoint</strong></a></li>
                <li>
                    <a href="#tbreak-tb" aria-label="tbreak (tb)"><strong>tbreak (tb)</strong></a></li>
                <li>
                    <a href="#info-frame" aria-label="info frame"><strong>info frame</strong></a></li>
                <li>
                    <a href="#info-registers" aria-label="info registers"><strong>info registers</strong></a></li>
                <li>
                    <a href="#set-register--value" aria-label="set $register = value"><strong>set $register = value</strong></a></li>
                <li>
                    <a href="#x" aria-label="x"><strong>x</strong></a></li>
                <li>
                    <a href="#info-threads" aria-label="info threads"><strong>info threads</strong></a></li>
                <li>
                    <a href="#thread" aria-label="thread"><strong>thread</strong></a></li>
                <li>
                    <a href="#set-pagination-offon" aria-label="set pagination off/on"><strong>set pagination off/on</strong></a></li>
                <li>
                    <a href="#attach" aria-label="attach"><strong>attach</strong></a></li>
                <li>
                    <a href="#detach" aria-label="detach"><strong>detach</strong></a></li>
                <li>
                    <a href="#info-functions" aria-label="info functions"><strong>info functions</strong></a></li>
                <li>
                    <a href="#%e5%8f%91%e7%94%9f%e6%ae%b5%e9%94%99%e8%af%af%e5%a6%82%e4%bd%95%e8%b0%83%e8%af%95" aria-label="发生段错误如何调试">发生段错误如何调试</a></li>
                <li>
                    <a href="#gdb%e5%a6%82%e4%bd%95%e8%b0%83%e8%af%95%e5%a4%9a%e7%ba%bf%e7%a8%8b%e7%a8%8b%e5%ba%8f" aria-label="gdb如何调试多线程程序">gdb如何调试多线程程序</a>
                </li>
            </ul>
        </div>
        </details>
    </div>
</aside>
<script>
    let activeElement;
    let elements;
    window.addEventListener('DOMContentLoaded', function (event) {
        checkTocPosition();

        elements = document.querySelectorAll('h1[id],h2[id],h3[id],h4[id],h5[id],h6[id]');
        
        activeElement = elements[0];
        const id = encodeURI(activeElement.getAttribute('id')).toLowerCase();
        document.querySelector(`.inner ul li a[href="#${id}"]`).classList.add('active');
    }, false);

    window.addEventListener('resize', function(event) {
        checkTocPosition();
    }, false);

    window.addEventListener('scroll', () => {
        
        if (elements) {
            activeElement = Array.from(elements).find((element) => {
                if ((getOffsetTop(element) - window.pageYOffset) > 0 &&
                    (getOffsetTop(element) - window.pageYOffset) < window.innerHeight/2) {
                    return element;
                }
            }) || activeElement

            elements.forEach(element => {
                const id = encodeURI(element.getAttribute('id')).toLowerCase();
                if (element === activeElement){
                    document.querySelector(`.inner ul li a[href="#${id}"]`).classList.add('active');
                } else {
                    document.querySelector(`.inner ul li a[href="#${id}"]`).classList.remove('active');
                }
            })
        }
    }, false);

    const main = parseInt(getComputedStyle(document.body).getPropertyValue('--article-width'), 10);
    const toc = parseInt(getComputedStyle(document.body).getPropertyValue('--toc-width'), 10);
    const gap = parseInt(getComputedStyle(document.body).getPropertyValue('--gap'), 10);

    function checkTocPosition() {
        const width = document.body.scrollWidth;
        if (width - main - (toc * 2) - (gap * 4) > 0) {
            document.getElementById("toc-container").classList.add("wide");
        } else {
            document.getElementById("toc-container").classList.remove("wide");
        }
    }

    function getOffsetTop(element) {
        if (!element.getClientRects().length) {
            return 0;
        }
        let rect = element.getBoundingClientRect();
        let win = element.ownerDocument.defaultView;
        return rect.top + win.pageYOffset;
    }
</script>
        <div class="post-content"><h1 id="start命令">start命令<a hidden class="anchor" aria-hidden="true" href="#start命令">#</a></h1>
<p>在GDB中，start 命令用于启动程序并停在程序的入口点处，等待你进行调试。它相当于设置一个断点在程序的 main 函数上并运行程序。这使你可以在程序开始执行之前检查变量、设置断点以及做其他调试操作。</p>
<p>以下是 start 命令的用法，其中 [args] 是传递给程序的命令行参数（</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>start [args] 
</span></span></code></pre></div><h1 id="gdb启动的时候指定参数">gdb启动的时候指定参数<a hidden class="anchor" aria-hidden="true" href="#gdb启动的时候指定参数">#</a></h1>
<p>一种方法是在 gdb 启动程序的同时直接指定参数。格式如下</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>gdb --args your_program arg1 arg2 arg3...
</span></span></code></pre></div><p>另一种方法是在gdb中设置</p>
<ol>
<li>
<p>首先启动 gdb 并加载你的程序。例如，如果你的程序名为 <code>myprogram</code>，则运行：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>gdb myprogram
</span></span></code></pre></div></li>
<li>
<p>在 gdb 提示符下，使用 <code>set args</code> 命令设置参数。例如，如果你想将 <code>arg1</code> 和 <code>arg2</code> 作为参数传递给你的程序，你应该运行：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>(gdb) set args arg1 arg2
</span></span></code></pre></div></li>
<li>
<p>现在，当你使用 <code>run</code> 命令开始执行程序时，它将使用你指定的参数。你可以使用 <code>show args</code> 命令查看当前设置的参数：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>(gdb) show args
</span></span><span style="display:flex;"><span>Argument list to give program being debugged when it is started is &#34;arg1 arg2&#34;.
</span></span></code></pre></div></li>
</ol>
<h1 id="run-r"><strong>run (r)</strong><a hidden class="anchor" aria-hidden="true" href="#run-r">#</a></h1>
<p>运行程序</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>r(un)
</span></span></code></pre></div><h1 id="break-b"><strong>break (b)</strong><a hidden class="anchor" aria-hidden="true" href="#break-b">#</a></h1>
<p>设置断点</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>b(reak) main
</span></span></code></pre></div><h1 id="next-n"><strong>next (n)</strong><a hidden class="anchor" aria-hidden="true" href="#next-n">#</a></h1>
<p>执行下一行代码</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>n(ext)
</span></span></code></pre></div><h1 id="list-l"><strong>list (l)</strong><a hidden class="anchor" aria-hidden="true" href="#list-l">#</a></h1>
<p>显示源代码</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>l(ist)
</span></span></code></pre></div><h1 id="up"><strong>up</strong><a hidden class="anchor" aria-hidden="true" href="#up">#</a></h1>
<p>进入上一级函数的上下文</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>up
</span></span></code></pre></div><h1 id="down"><strong>down</strong><a hidden class="anchor" aria-hidden="true" href="#down">#</a></h1>
<p>进入下一级函数的上下文</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>down
</span></span></code></pre></div><h1 id="displayundisplay"><strong>display/undisplay</strong><a hidden class="anchor" aria-hidden="true" href="#displayundisplay">#</a></h1>
<p>每次步进时显示或取消显示变量的值</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>display variable_name
</span></span><span style="display:flex;"><span>undisplay variable_name
</span></span></code></pre></div><h1 id="backtrace-bt"><strong>backtrace (bt)</strong><a hidden class="anchor" aria-hidden="true" href="#backtrace-bt">#</a></h1>
<p>显示函数调用堆栈</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>bt(acktrace)
</span></span></code></pre></div><h1 id="step"><strong>step</strong><a hidden class="anchor" aria-hidden="true" href="#step">#</a></h1>
<p>单步进入函数</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>s(tep)
</span></span></code></pre></div><h1 id="continue"><strong>continue</strong><a hidden class="anchor" aria-hidden="true" href="#continue">#</a></h1>
<p>继续执行直到下一个断点</p>
<pre><code>```
c(ontinue)
```
</code></pre>
<h1 id="finish"><strong>finish</strong><a hidden class="anchor" aria-hidden="true" href="#finish">#</a></h1>
<p>执行完当前函数并停在调用该函数的位置</p>
<pre><code>```
finish
```
</code></pre>
<h1 id="watch"><strong>watch</strong><a hidden class="anchor" aria-hidden="true" href="#watch">#</a></h1>
<p>监视变量的值是否发生变化</p>
<pre><code>```
watch variable_name
```
</code></pre>
<h1 id="info-breakpoints"><strong>info breakpoints</strong><a hidden class="anchor" aria-hidden="true" href="#info-breakpoints">#</a></h1>
<p>显示当前设置的断点信息</p>
<pre><code>```
info breakpoints
```
</code></pre>
<h1 id="delete"><strong>delete</strong><a hidden class="anchor" aria-hidden="true" href="#delete">#</a></h1>
<p>删除指定断点</p>
<pre><code>```
delete breakpoint_number
```
</code></pre>
<h1 id="reverse-next-rn"><strong>reverse-next (rn)</strong><a hidden class="anchor" aria-hidden="true" href="#reverse-next-rn">#</a></h1>
<p>反向执行到上一行</p>
<pre><code>```
reverse-next
```
</code></pre>
<h1 id="set-var"><strong>set var</strong><a hidden class="anchor" aria-hidden="true" href="#set-var">#</a></h1>
<p>设置变量的值</p>
<pre><code>```
set var x = new_value
```
</code></pre>
<h1 id="print-p"><strong>print (p)</strong><a hidden class="anchor" aria-hidden="true" href="#print-p">#</a></h1>
<p>打印变量的值</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>arduinoCopy code
</span></span><span style="display:flex;"><span>print variable_name
</span></span></code></pre></div><h1 id="info-locals"><strong>info locals</strong><a hidden class="anchor" aria-hidden="true" href="#info-locals">#</a></h1>
<p>显示当前函数的局部变量</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>info locals
</span></span></code></pre></div><h1 id="info-args"><strong>info args</strong><a hidden class="anchor" aria-hidden="true" href="#info-args">#</a></h1>
<p>显示当前函数的参数</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>info args
</span></span></code></pre></div><h1 id="set-breakpoint-condition"><strong>set breakpoint condition</strong><a hidden class="anchor" aria-hidden="true" href="#set-breakpoint-condition">#</a></h1>
<p>设置断点的触发条件</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>break main if condition
</span></span></code></pre></div><h1 id="disableenable-breakpoints"><strong>disable/enable breakpoints</strong><a hidden class="anchor" aria-hidden="true" href="#disableenable-breakpoints">#</a></h1>
<p>禁用/启用断点</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>disable breakpoint_number
</span></span><span style="display:flex;"><span>enable breakpoint_number
</span></span></code></pre></div><h1 id="ignore-breakpoint"><strong>ignore breakpoint</strong><a hidden class="anchor" aria-hidden="true" href="#ignore-breakpoint">#</a></h1>
<p>设置忽略断点的次数</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>ignore breakpoint_number count
</span></span></code></pre></div><h1 id="tbreak-tb"><strong>tbreak (tb)</strong><a hidden class="anchor" aria-hidden="true" href="#tbreak-tb">#</a></h1>
<p>在单次执行后自动移除断点</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>tbreak function_name
</span></span></code></pre></div><h1 id="info-frame"><strong>info frame</strong><a hidden class="anchor" aria-hidden="true" href="#info-frame">#</a></h1>
<p>显示当前栈帧的信息</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>info frame
</span></span></code></pre></div><h1 id="info-registers"><strong>info registers</strong><a hidden class="anchor" aria-hidden="true" href="#info-registers">#</a></h1>
<p>显示寄存器的内容</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>info registers
</span></span></code></pre></div><h1 id="set-register--value"><strong>set $register = value</strong><a hidden class="anchor" aria-hidden="true" href="#set-register--value">#</a></h1>
<p>设置寄存器的值</p>
<pre><code>```
set $rax = 42
```
</code></pre>
<h1 id="x"><strong>x</strong><a hidden class="anchor" aria-hidden="true" href="#x">#</a></h1>
<p>以不同的格式显示内存内容</p>
<pre><code>```
x/4xw memory_address
```
</code></pre>
<h1 id="info-threads"><strong>info threads</strong><a hidden class="anchor" aria-hidden="true" href="#info-threads">#</a></h1>
<p>显示所有线程的信息</p>
<pre><code>```
info threads
```
</code></pre>
<h1 id="thread"><strong>thread</strong><a hidden class="anchor" aria-hidden="true" href="#thread">#</a></h1>
<p>切换到指定线程的上下文</p>
<pre><code>```
thread thread_number
```
</code></pre>
<h1 id="set-pagination-offon"><strong>set pagination off/on</strong><a hidden class="anchor" aria-hidden="true" href="#set-pagination-offon">#</a></h1>
<p>关闭/打开分页显示</p>
<pre><code>```
set pagination off
```
</code></pre>
<h1 id="attach"><strong>attach</strong><a hidden class="anchor" aria-hidden="true" href="#attach">#</a></h1>
<p>附加到正在运行的进程</p>
<pre><code>```
attach process_id
```
</code></pre>
<h1 id="detach"><strong>detach</strong><a hidden class="anchor" aria-hidden="true" href="#detach">#</a></h1>
<p>从正在调试的进程中分离</p>
<pre><code>```
detach
```
</code></pre>
<h1 id="info-functions"><strong>info functions</strong><a hidden class="anchor" aria-hidden="true" href="#info-functions">#</a></h1>
<p>显示可用函数的列表</p>
<pre><code>```
info functions
```
</code></pre>
<h1 id="发生段错误如何调试">发生段错误如何调试<a hidden class="anchor" aria-hidden="true" href="#发生段错误如何调试">#</a></h1>
<p>段错误（Segmentation fault），通常也被称为 Sigsegv，是一种特定的错误条件，表示一个程序试图访问的内存区域并未被分配给它，或者只读。这通常是由于编程错误引起的，比如在 C/C++ 中，非法指针解引用、数组越界、堆栈溢出等情况可能触发段错误。</p>
<p>解决段错误的关键步骤如下：</p>
<p><strong>1. 定位错误</strong></p>
<p>你可以使用各种工具来帮助定位引发段错误的代码行，如 GDB、Valgrind 等。</p>
<p>对于 GDB，你可以这样使用：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>gdb your-program
</span></span><span style="display:flex;"><span>run
</span></span></code></pre></div><p>当段错误发生时，使用 <code>backtrace</code> 或 <code>bt</code> 命令查看调用堆栈。</p>
<p><strong>2. 检查可能的原因</strong></p>
<ul>
<li>非法指针解引用：你是否有指针没有初始化就使用，或者指针已经释放后又使用？</li>
<li>数组越界：你是否访问了数组的边界之外？</li>
<li>堆栈溢出：你是否在栈上申请了大量的内存？</li>
</ul>
<p><strong>3. 修复问题</strong></p>
<p>找到问题后，修复相应的代码。例如，对于空指针解引用，你需要检查指针是否为空，然后再进行操作。如果是数组越界，确定你的索引或计数器在正确范围内。</p>
<p><strong>4. 测试</strong></p>
<p>修复后，重新编译并运行你的程序，确认问题是否已经解决。</p>
<p>以上步骤并不保证能解决所有的段错误，但是至少能帮你找到出错的地方，并且提供一些可能的解决方案。碰到棘手的问题时，不要忘记寻求同事或者网络社区的帮助。</p>
<h1 id="gdb如何调试多线程程序">gdb如何调试多线程程序<a hidden class="anchor" aria-hidden="true" href="#gdb如何调试多线程程序">#</a></h1>
<p>要使用 GDB 调试这个多线程程序，需要以下步骤:</p>
<ol>
<li>先编译你的程序并包含调试信息。你可以用 <code>-g</code> 参数来做到这一点：</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>g++ -g -std=c++11 multithread.cpp -o multithread -pthread
</span></span></code></pre></div><ol>
<li>然后，启动 GDB 并加载你的程序：</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>gdb ./multithread
</span></span></code></pre></div><ol>
<li>在 <code>main</code> 函数或者 <code>worker</code> 函数开始处设置断点。比如我们在 <code>worker</code> 函数设置断点，执行如下命令：</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>(gdb) break worker
</span></span></code></pre></div><ol>
<li>开始运行你的程序：</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>(gdb) run
</span></span></code></pre></div><ol>
<li>当程序停在断点时，你可以查看所有的线程：</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>(gdb) info threads
</span></span></code></pre></div><ol>
<li>这会列出所有的线程及其状态。每个线程都有一个唯一的 ID，你可以用这个 ID 来切换不同的线程，例如，切换到线程 2：</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>(gdb) thread 2
</span></span></code></pre></div><ol>
<li>你可以使用 <code>next</code>, <code>step</code>, <code>continue</code> 等命令在选定的线程中进行单步调试，或查看堆栈信息：</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>bt
</span></span></code></pre></div>

        </div>

        <footer class="post-footer">
            
<nav class="paginav">
  <a class="prev" href="https://www.junshou.top/posts/toolchain/gcc/">
    <span class="title">« 上一页</span>
    <br>
    <span>Gcc</span>
  </a>
  <a class="next" href="https://www.junshou.top/posts/toolchain/cmake/">
    <span class="title">下一页 »</span>
    <br>
    <span>CMake</span>
  </a>
</nav>

        </footer>
    </div>

<style>
    .comments_details summary::marker {
        font-size: 20px;
        content: '👉展开评论';
        color: var(--content);
    }
    .comments_details[open] summary::marker{
        font-size: 20px;
        content: '👇关闭评论';
        color: var(--content);
    }
</style>


<div>
    <details class="comments_details">
        <summary style="cursor: pointer; margin: 50px 0 20px 0;width: 130px;">
            <span style="font-size: 20px;color: var(--content);">...</span>
        </summary>
        <div id="tcomment"></div>
    </details>
    <script src="https://cdn.staticfile.org/twikoo//twikoo.all.min.js">
    </script>
    <script>
        twikoo.init({
            envId:  null ,
        el: "#tcomment",
            lang: 'zh-CN',
            region:  null ,
        path: window.TWIKOO_MAGIC_PATH||window.location.pathname,
        })
    </script>
</div>
</article>
</main>

<footer class="footer">
    <span>
        Copyright
        &copy;
        -2023
        <a href="https://www.junshou.top/" style="color:#939393;">chx9</a>
        All Rights Reserved
    </span>
    <a href="https://beian.miit.gov.cn/" target="_blank" style="color:#939393;"></a>&nbsp;
    <span>
        <a target="_blank" href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=null"
           style="display:inline-block;text-decoration:none;height:20px;color:#939393;">
            <img src="" style="float:left;margin: 0px 5px 0px 0px;"/>
            
        </a>
    </span>
    <span id="busuanzi_container">
        <span class="fa fa-user"></span> <span id="busuanzi_value_site_uv"></span>
        <span class="fa fa-eye"></span> <span id="busuanzi_value_site_pv"></span>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <span class="topInner">
        <svg class="topSvg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
            <path d="M12 6H0l6-6z"/>
        </svg>
        <span id="read_progress"></span>
    </span>
</a>

<script>
    document.addEventListener('scroll', function (e) {
        const readProgress = document.getElementById("read_progress");
        const scrollHeight = document.documentElement.scrollHeight;
        const clientHeight = document.documentElement.clientHeight;
        const scrollTop = document.documentElement.scrollTop || document.body.scrollTop;
        readProgress.innerText = ((scrollTop / (scrollHeight - clientHeight)).toFixed(2) * 100).toFixed(0);
    })
</script>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });
</script>
<script>
    let mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 200 || document.documentElement.scrollTop > 200) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };
</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        (function() {
            document.cookie = "change-themes" + "="+ escape ("false");
        })()

        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    });
</script>

<script>
    document.body.addEventListener('copy', function (e) {
        if (window.getSelection().toString() && window.getSelection().toString().length > 50) {
            let clipboardData = e.clipboardData || window.clipboardData;
            if (clipboardData) {
                e.preventDefault();
                let htmlData = window.getSelection().toString() 
                let textData = window.getSelection().toString() 
                clipboardData.setData('text/html', htmlData);
                clipboardData.setData('text/plain', textData);
                
                
                
                
                
                
                
                
                
                
            }
        }
    });
</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;
        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerText = '📄复制';

        function copyingDone() {
            copybutton.innerText = '👌🏻已复制!';
            setTimeout(() => {
                copybutton.innerText = '📄复制';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                let text = codeblock.textContent 
                
                
                
                navigator.clipboard.writeText(text);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) {}
            selection.removeRange(range);
        });

        let language = codeblock.className.replaceAll("language-", "")
        let macTool = document.createElement("div")
        let macTool1 = document.createElement("div")
        let macTool2 = document.createElement("div")
        let macTool3 = document.createElement("div")
        let languageType = document.createElement("div")
        languageType.innerText = language
        
        
        
        
        languageType.setAttribute('class', 'language-type')
        macTool.appendChild(macTool1)
        macTool.appendChild(macTool2)
        macTool.appendChild(macTool3)
        macTool.appendChild(languageType)

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
            container.appendChild(macTool)
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
            container.appendChild(macTool)
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
            container.appendChild(macTool)
        }
    });
</script>
</body>

</html>
