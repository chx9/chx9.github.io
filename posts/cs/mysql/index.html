<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>mysql | chx9</title>
<meta name="keywords" content="">
<meta name="description" content="脏读，幻读，不可重复读解决了什么问题 脏读、幻读、可重复读是数据库中常见的隔离级别问题，它们分别解决了以下问题： 脏读（Dirty Read）：当一个事务读取到另一个事务未提交的数据时，就产生了脏读。脏读可能导致数据的不一致性，因为读取到的数据可能会随时被其他事务修改或回滚。解决脏读的">
<meta name="author" content="chx9">
<link rel="canonical" href="https://www.junshou.top/posts/cs/mysql/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.css" rel="preload stylesheet" as="style">
<script defer crossorigin="anonymous" src="/assets/js/highlight.js" onload="hljs.initHighlightingOnLoad();"></script>
<link rel="icon" href="https://www.junshou.top/img/svin.webp">
<link rel="icon" type="image/png" sizes="16x16" href="https://www.junshou.top/img/svin.webp">
<link rel="icon" type="image/png" sizes="32x32" href="https://www.junshou.top/img/svin.webp">
<link rel="apple-touch-icon" href="https://www.junshou.top/img/svin.webp">
<link rel="mask-icon" href="https://www.junshou.top/img/svin.webp">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --hljs-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript>
<script defer src="https://unpkg.com/mermaid@8.8.1/dist/mermaid.min.js"></script>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css">
<script src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
<script src="https://cdn.jsdelivr.net/npm/jquery@3.6.3/dist/jquery.min.js"></script>



<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = ""; 
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>
<meta property="og:title" content="mysql" />
<meta property="og:description" content="脏读，幻读，不可重复读解决了什么问题 脏读、幻读、可重复读是数据库中常见的隔离级别问题，它们分别解决了以下问题： 脏读（Dirty Read）：当一个事务读取到另一个事务未提交的数据时，就产生了脏读。脏读可能导致数据的不一致性，因为读取到的数据可能会随时被其他事务修改或回滚。解决脏读的" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://www.junshou.top/posts/cs/mysql/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-07-29T11:06:20+08:00" />
<meta property="article:modified_time" content="2023-07-29T11:06:20+08:00" />

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="mysql"/>
<meta name="twitter:description" content="脏读，幻读，不可重复读解决了什么问题 脏读、幻读、可重复读是数据库中常见的隔离级别问题，它们分别解决了以下问题： 脏读（Dirty Read）：当一个事务读取到另一个事务未提交的数据时，就产生了脏读。脏读可能导致数据的不一致性，因为读取到的数据可能会随时被其他事务修改或回滚。解决脏读的"/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [

        {
          "@type": "ListItem",
          "position":  1 ,
          "name": "📚Articles",
          "item": "https://www.junshou.top/posts/"
        },

        {
          "@type": "ListItem",
          "position":  2 ,
          "name": "💻 Programming Basics",
          "item": "https://www.junshou.top/posts/cs/"
        }, 
    {
      "@type": "ListItem",
      "position":  3 ,
      "name": "mysql",
      "item": "https://www.junshou.top/posts/cs/mysql/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "mysql",
  "name": "mysql",
  "description": "脏读，幻读，不可重复读解决了什么问题 脏读、幻读、可重复读是数据库中常见的隔离级别问题，它们分别解决了以下问题： 脏读（Dirty Read）：当一个事务读取到另一个事务未提交的数据时，就产生了脏读。脏读可能导致数据的不一致性，因为读取到的数据可能会随时被其他事务修改或回滚。解决脏读的",
  "keywords": [
    ""
  ],
  "articleBody": "脏读，幻读，不可重复读解决了什么问题 脏读、幻读、可重复读是数据库中常见的隔离级别问题，它们分别解决了以下问题：\n脏读（Dirty Read）：当一个事务读取到另一个事务未提交的数据时，就产生了脏读。脏读可能导致数据的不一致性，因为读取到的数据可能会随时被其他事务修改或回滚。解决脏读的问题需要使用隔离级别为 Read Committed 或以上的级别，保证读取到的数据都是已经提交的数据。\n幻读（Phantom Read）：当一个事务读取到其他事务插入的新数据时，就产生了幻读。幻读可能导致数据的不一致性，因为读取到的数据可能会随时被其他事务修改或删除。解决幻读的问题需要使用隔离级别为 Serializable 级别，保证读取的数据都是一致的。\n可重复读（Repeatable Read）：当一个事务读取到其他事务修改的数据时，就产生了可重复读。可重复读可能导致数据的不一致性，因为读取到的数据可能会随时被其他事务修改或删除。解决可重复读的问题需要使用隔离级别为 Repeatable Read 或以上的级别，保证读取到的数据在事务提交之前不会被其他事务修改或删除。\n需要注意的是，提高隔离级别可以降低并发性能，因此需要根据实际情况来选择合适的隔离级别，同时需要注意数据库的锁机制和优化策略，以提高系统的性能和可用性。\nmysql 索引失效的几种方式 联合索引不满足最左匹配原则 使用了 select * 索引列参与运算 索引列参使用了函数示例 like 出现在开头 %abcd 使用 OR 操作 索引使用假设有一个联合索引(a,b,c)，分析以下查询情况： b = 2 and a=1 此查询条件可以很好地利用索引，因为索引的第二个字段是 b，第一个字段是 a，可以直接定位到满足条件的行。\nb = 2 or a = 1 这个查询条件不能很好地利用索引，因为这是一个或条件，需要同时扫描索引中 a=1 和 b=2 的记录，然后再将结果合并。因此，在这种情况下，数据库可能会选择使用全表扫描而不是索引扫描。\na = 1 and b \u003e 2 此查询条件可以利用索引的前两个字段（a,b），可以直接定位到满足条件的行。\na \u003e 1 and b =2 这个查询条件不能很好地利用索引，因为索引是按(a,b,c)的顺序排列的，而查询条件中第一个字段是 a，第二个字段是 b，第三个字段是 c，所以在 b=2 的情况下，需要扫描所有 a\u003e1 的记录，直到找到满足条件的记录。因此，在这种情况下，数据库可能会选择使用全表扫描而不是索引扫描。\n索引使用 总之，联合索引(a,b,c)在不同的查询条件下，可以有不同的索引扫描效果。在实际应用中，建立联合索引的时候，需要根据实际情况和查询需求，选择合适的索引列顺序和索引列组合方式，以获得更好的索引扫描效果。\nmysql 优化 MySQL 查询优化是提高 MySQL 数据库性能的重要手段之一，它可以优化查询语句、数据表结构、索引等方面，以提高查询效率和性能。具体来说，MySQL 查询优化可以从以下几个方面入手：\n优化查询语句：优化查询语句是提高 MySQL 查询性能的第一步，可以通过使用合适的查询语句、避免使用子查询、避免使用%通配符、缩小查询范围等方式来减少查询时间和资源消耗。\n优化数据表结构：优化数据表结构可以提高 MySQL 数据库的查询性能和效率，可以通过合理设计数据表、避免使用过多的列、避免使用 TEXT 和 BLOB 类型等方式来提升 MySQL 数据库的性能。\n优化索引：索引是提高 MySQL 查询性能的重要手段之一，可以通过创建合适的索引、避免过多的索引、避免使用过多的组合索引、避免使用不必要的索引等方式来提高 MySQL 查询性能。\n避免全表扫描：全表扫描是 MySQL 查询性能低下的主要原因之一，可以通过使用索引、分区表、分页等方式来避免全表扫描，提高查询效率和性能。\n调整服务器参数：调整服务器参数可以提高 MySQL 数据库的性能和效率，可以通过调整缓存大小、调整线程池、调整查询缓存等方式来提高 MySQL 数据库的性能和效率。\n总之，MySQL 查询优化是提高 MySQL 数据库性能和效率的重要手段之一，需要根据实际情况采取合适的优化方法和手段来提高 MySQL 数据库的性能和效率。\n索引的类型 在数据库中，索引是一种特殊的数据结构，可以加快查询操作的速度。常见的索引类型包括以下几种：\nB-Tree 索引：B-Tree 索引是一种最常见的索引类型，适用于范围查找、等值查找等操作。B-Tree 索引可以快速定位到指定的记录，同时支持多列索引和前缀索引。\nHash 索引：Hash 索引是一种基于哈希表的索引类型，适用于只有等值查找操作的场景。Hash 索引可以快速定位到指定的记录，但不支持范围查找和排序操作。\nFull-Text 索引：Full-Text 索引是一种用于全文搜索的索引类型，适用于文本字段的搜索。Full-Text 索引可以在搜索中使用自然语言查询、通配符、布尔运算等操作，提供更加灵活的搜索功能。\nR-Tree 索引：R-Tree 索引是一种用于空间数据的索引类型，适用于地理信息、图像、音频等空间数据的查询。R-Tree 索引可以快速定位到指定的空间数据，同时支持范围查找和空间关系查询。\nBitmap 索引：Bitmap 索引是一种基于位图的索引类型，适用于低基数列的查询。Bitmap 索引可以将每个唯一值映射为一个位图，可以快速定位到指定的记录，同时支持多列索引和位图合并等操作。\n总之，不同类型的索引适用于不同的场景和查询操作，需要根据实际情况选择合适的索引类型来提高查询效率和性能。\n红黑树 红黑树是一种自平衡二叉查找树，每个节点有一个颜色属性：红或黑。红黑树满足以下特性：\n每个节点要么是黑色，要么是红色。 根节点是黑色。 所有叶子节点（NIL 节点，空节点）是黑色。 如果一个节点是红色的，则它的两个子节点都是黑色的。 从任意节点到其每个叶子节点的所有路径包含相同数量的黑色节点。\n红黑树比 AVL 树的优点 红黑树与 AVL 树都是自平衡二叉搜索树，但红黑树在实际应用中的优点如下：\n调整次数少：AVL 树每次插入或删除可能需要进行多次调整，而红黑树最多只需 3 次。 结构稳定：红黑树对于相同集合的数据，形成的结构是唯一的，而 AVL 树则可能有多种。 适用于读操作多的情况：AVL 树由于严格的平衡性，查找效率较高，适合读操作多的情况，而红黑树虽然平衡性较差，但是其维护平衡的代价小，更适合写操作多的场景。 数据库三大范式 数据库的三大范式是为了消除数据冗余和提高数据完整性而制定的规则：\n第一范式（1NF）：表的每一列都是不可分割的基本数据项，同一列中的值必须是相同类型，且唯一。\n第二范式（2NF）：在 1NF 的基础上，所有非主属性（非码属性）完全依赖于主键（码）。即一个表只描述一件事情。\n第三范式（3NF）：在 2NF 的基础上，消除传递依赖，非主属性之间不能存在依赖关系。\n第一范式（1NF）\n违反 1NF 的例子： 表格有一个“客户”字段，该字段中存储了客户的名字和地址。\n客户 张三, 北京 李四, 上海 遵循 1NF 后： 将“客户”字段分割为“客户名字”和“客户地址”。\n客户名字 客户地址 张三 北京 李四 上海 第二范式（2NF）\n违反 2NF 的例子：\n学号 课程 教室 老师 1001 数学 A101 张三 1002 英语 B201 李四 此表的主键是(学号, 课程)，但\"教室\"只依赖\"课程\"，“老师\"也只依赖\"课程”，不满足 2NF。\n遵循 2NF 后： 拆成两个表，每个表都满足所有非主属性完全依赖于全部候选键。\n学生选课表：\n学号 课程 1001 数学 1002 英语 课程表：\n课程 教室 老师 数学 A101 张三 英语 B201 李四 第三范式（3NF）\n违反 3NF 的例子：\n订单编号 商品编号 商品价格 O001 G001 50 O002 G002 100 此表中，“商品价格”直接依赖于“商品编号”，而不是“订单编号”。\n遵循 3NF 后： 拆分为两张表，消除传递依赖。\n订单表：\n订单编号 商品编号 O001 G001 O002 G002 商品表：\n商品编号 商品价格 G001 50 G002 100 mysql page cache 技术 MySQL 的 Page Cache 技术是一种基于内存的缓存技术，它可以将磁盘上的数据缓存在内存中，以加速数据库的读取操作。Page Cache 的实现原理是将磁盘上的数据分割成固定大小的页面（通常是 16KB），然后将这些页面缓存到内存中。\n当 MySQL 需要读取数据时，它首先检查 Page Cache 中是否已经缓存了所需的页面。如果页面已经在 Page Cache 中，则 MySQL 可以直接从内存中读取数据，从而避免了从磁盘上读取数据的开销。如果页面不在 Page Cache 中，则 MySQL 会从磁盘上读取数据并将其存储到 Page Cache 中，以便以后的读取操作可以更快地完成。\nPage Cache 技术可以显著提高 MySQL 的读取性能，特别是对于那些需要频繁读取的数据。然而，它也有一些限制，例如缓存的数据量受限于可用内存的大小，而且 Page Cache 中的数据不会随着数据库的更新而自动更新，需要手动调用 MySQL 的刷新函数才能更新。因此，在使用 Page Cache 技术时需要仔细评估内存使用和缓存更新的策略，以确保系统的性能和稳定性。\nmysql 如何实现 MVCC 的 主要是两个 版本号：每个数据行都有一个版本号，用于表示该数据行的版本信息。在 MySQL 中，每个事务都有一个唯一的事务 ID，每次对数据行进行修改时，都会创建一个新的版本，并将该版本与当前事务 ID 绑定。\n快照：每个事务都会创建一个独立的快照，用于保存该事务开始时数据库中所有数据行的版本信息。在 MySQL 中，快照是通过事务开始时的系统版本号来实现的。\n",
  "wordCount" : "3532",
  "inLanguage": "en",
  "datePublished": "2023-07-29T11:06:20+08:00",
  "dateModified": "2023-07-29T11:06:20+08:00",
  "author":[{
    "@type": "Person",
    "name": "chx9"
  }],
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://www.junshou.top/posts/cs/mysql/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "chx9",
    "logo": {
      "@type": "ImageObject",
      "url": "https://www.junshou.top/img/svin.webp"
    }
  }
}
</script>
</head>

<body class="" id="top">
<script>
    (function () {
        let  arr,reg = new RegExp("(^| )"+"change-themes"+"=([^;]*)(;|$)");
        if(arr = document.cookie.match(reg)) {
        } else {
            if (new Date().getHours() >= 19 || new Date().getHours() < 6) {
                document.body.classList.add('dark');
                localStorage.setItem("pref-theme", 'dark');
            } else {
                document.body.classList.remove('dark');
                localStorage.setItem("pref-theme", 'light');
            }
        }
    })()

    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }
</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://www.junshou.top/" accesskey="h" title="chx9 (Alt + H)">chx9</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                         fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                         stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                         fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                         stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="https://www.junshou.top/search" title="🔍 search (Alt &#43; /)" accesskey=/>
                <span>🔍 search</span>
                </a>
            </li>
            <li>
                <a href="https://www.junshou.top/" title="🏠 home">
                <span>🏠 home</span>
                </a>
            </li>
            <li>
                <a href="https://www.junshou.top/posts" title="📚 articles">
                <span>📚 articles</span>
                </a>
            </li>
            <li>
                <a href="https://www.junshou.top/tags" title="🧩 tags">
                <span>🧩 tags</span>
                </a>
            </li>
            <li>
                <a href="https://www.junshou.top/about" title="🙋🏻‍♂️ about">
                <span>🙋🏻‍♂️ about</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main page">
<style>
    i[id*="post_meta_style"] {
        display: flex;
        align-items: center;
        margin: 0 0 10px 0;
    }
</style>

<article class="post-single">
    <div id="single-content">
        <header class="post-header">
            <div class="breadcrumbs"><a href="https://www.junshou.top/">🏠 主页</a>&nbsp;»&nbsp;<a href="https://www.junshou.top/posts/">📚Articles</a>&nbsp;»&nbsp;<a href="https://www.junshou.top/posts/cs/">💻 Programming Basics</a></div>
            <h1 class="post-title">
                mysql
            </h1>
            <div class="post-meta">

<style>
    i[id*="post_meta_style"] {
        display: flex;
        align-items: center;
        margin: 0 0 10px 0;
    }

    .parent-post-meta {
        display: flex;
        flex-wrap: wrap;
        opacity: 0.8;
    }
</style>

<span class="parent-post-meta">
    <span id="post_meta_style_1">
        <span class="fa fa-calendar-check-o"></span>
        <span>2023-07-29
            &nbsp;&nbsp;
        </span>
    </span>
    
    
    
    
    
    
    
    <span id="post_meta_style_3">
        <span class="fa fa-file-word-o"></span>
        <span>3532字
            &nbsp;&nbsp;
        </span>
    </span>
    <span id="post_meta_style_4">
        <span class="fa fa-clock-o"></span>
        <span>8分钟
            &nbsp;&nbsp;
        </span>
    </span>
    <span id="post_meta_style_5">
        <span class="fa fa-user-o"></span>
        <span>chx9
            &nbsp;&nbsp;
        </span>
    </span>
    <span id="post_meta_style_6">
        <span class="fa fa-tags" style="opacity: 0.8"></span>
        <span>
            <span class="post-tags-meta">
            </span>
        </span>
    </span>
</span>
<span style="opacity: 0.8;">
                    <span id="post_meta_style_7">
                        &nbsp;&nbsp;
                        <span class="fa fa-eye" ></span>
                        <span>
                            <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv"></span></span>
                            &nbsp;&nbsp;
                        </span>
                    </span>
                    <span id="post_meta_style_8">
                        <span class="fa fa-commenting-o"></span>
                        <span>
                            <script src="https://cdn.staticfile.org/twikoo//twikoo.all.min.js"></script>
                            <script>
                                let url = document.documentURI
                                
                                let dnsUrl = "https://www.junshou.top/"
                                let urlSplit = url.split(dnsUrl)
                                let finalUrl = urlSplit[1]
                                if (finalUrl[0] !== '/') {
                                    finalUrl = '/'+finalUrl
                                }
                                twikoo.getCommentsCount({
                                    envId:  null , 
                                region:  null , 
                                urls: [ 
                                    
                                    finalUrl,
                                ],
                                    includeReply: false 
                                }).then(function (res) {
                                    let count = res[0].count
                                    const obj = document.getElementById("comment_count");
                                    obj.innerText = count
                                    
                                    
                                    
                                }).catch(function (err) {
                                    
                                    console.error(err);
                                });
                            </script>
                            <span id="comment_count"></span>
                        </span>
                    </span>
                </span>

</div>
        </header> <aside id="toc-container" class="toc-container wide">
    <div class="toc">
        <details  open>
        <summary accesskey="c" title="(Alt + C)">
            <span class="details">目录</span>
        </summary>

        <div class="inner"><ul>
                <li>
                    <a href="#%e8%84%8f%e8%af%bb%e5%b9%bb%e8%af%bb%e4%b8%8d%e5%8f%af%e9%87%8d%e5%a4%8d%e8%af%bb%e8%a7%a3%e5%86%b3%e4%ba%86%e4%bb%80%e4%b9%88%e9%97%ae%e9%a2%98" aria-label="脏读，幻读，不可重复读解决了什么问题">脏读，幻读，不可重复读解决了什么问题</a></li>
                <li>
                    <a href="#mysql-%e7%b4%a2%e5%bc%95%e5%a4%b1%e6%95%88%e7%9a%84%e5%87%a0%e7%a7%8d%e6%96%b9%e5%bc%8f" aria-label="mysql 索引失效的几种方式">mysql 索引失效的几种方式</a></li>
                <li>
                    <a href="#%e7%b4%a2%e5%bc%95%e4%bd%bf%e7%94%a8%e5%81%87%e8%ae%be%e6%9c%89%e4%b8%80%e4%b8%aa%e8%81%94%e5%90%88%e7%b4%a2%e5%bc%95abc%e5%88%86%e6%9e%90%e4%bb%a5%e4%b8%8b%e6%9f%a5%e8%af%a2%e6%83%85%e5%86%b5" aria-label="索引使用假设有一个联合索引(a,b,c)，分析以下查询情况：">索引使用假设有一个联合索引(a,b,c)，分析以下查询情况：</a></li>
                <li>
                    <a href="#%e7%b4%a2%e5%bc%95%e4%bd%bf%e7%94%a8" aria-label="索引使用">索引使用</a></li>
                <li>
                    <a href="#mysql-%e4%bc%98%e5%8c%96" aria-label="mysql 优化">mysql 优化</a></li>
                <li>
                    <a href="#%e7%b4%a2%e5%bc%95%e7%9a%84%e7%b1%bb%e5%9e%8b" aria-label="索引的类型">索引的类型</a></li>
                <li>
                    <a href="#%e7%ba%a2%e9%bb%91%e6%a0%91" aria-label="红黑树">红黑树</a></li>
                <li>
                    <a href="#%e7%ba%a2%e9%bb%91%e6%a0%91%e6%af%94-avl-%e6%a0%91%e7%9a%84%e4%bc%98%e7%82%b9" aria-label="红黑树比 AVL 树的优点">红黑树比 AVL 树的优点</a></li>
                <li>
                    <a href="#%e6%95%b0%e6%8d%ae%e5%ba%93%e4%b8%89%e5%a4%a7%e8%8c%83%e5%bc%8f" aria-label="数据库三大范式">数据库三大范式</a></li>
                <li>
                    <a href="#mysql-page-cache-%e6%8a%80%e6%9c%af" aria-label="mysql page cache 技术">mysql page cache 技术</a></li>
                <li>
                    <a href="#mysql-%e5%a6%82%e4%bd%95%e5%ae%9e%e7%8e%b0-mvcc-%e7%9a%84" aria-label="mysql 如何实现 MVCC 的">mysql 如何实现 MVCC 的</a>
                </li>
            </ul>
        </div>
        </details>
    </div>
</aside>
<script>
    let activeElement;
    let elements;
    window.addEventListener('DOMContentLoaded', function (event) {
        checkTocPosition();

        elements = document.querySelectorAll('h1[id],h2[id],h3[id],h4[id],h5[id],h6[id]');
        
        activeElement = elements[0];
        const id = encodeURI(activeElement.getAttribute('id')).toLowerCase();
        document.querySelector(`.inner ul li a[href="#${id}"]`).classList.add('active');
    }, false);

    window.addEventListener('resize', function(event) {
        checkTocPosition();
    }, false);

    window.addEventListener('scroll', () => {
        
        if (elements) {
            activeElement = Array.from(elements).find((element) => {
                if ((getOffsetTop(element) - window.pageYOffset) > 0 &&
                    (getOffsetTop(element) - window.pageYOffset) < window.innerHeight/2) {
                    return element;
                }
            }) || activeElement

            elements.forEach(element => {
                const id = encodeURI(element.getAttribute('id')).toLowerCase();
                if (element === activeElement){
                    document.querySelector(`.inner ul li a[href="#${id}"]`).classList.add('active');
                } else {
                    document.querySelector(`.inner ul li a[href="#${id}"]`).classList.remove('active');
                }
            })
        }
    }, false);

    const main = parseInt(getComputedStyle(document.body).getPropertyValue('--article-width'), 10);
    const toc = parseInt(getComputedStyle(document.body).getPropertyValue('--toc-width'), 10);
    const gap = parseInt(getComputedStyle(document.body).getPropertyValue('--gap'), 10);

    function checkTocPosition() {
        const width = document.body.scrollWidth;
        if (width - main - (toc * 2) - (gap * 4) > 0) {
            document.getElementById("toc-container").classList.add("wide");
        } else {
            document.getElementById("toc-container").classList.remove("wide");
        }
    }

    function getOffsetTop(element) {
        if (!element.getClientRects().length) {
            return 0;
        }
        let rect = element.getBoundingClientRect();
        let win = element.ownerDocument.defaultView;
        return rect.top + win.pageYOffset;
    }
</script>
        <div class="post-content"><h1 id="脏读幻读不可重复读解决了什么问题">脏读，幻读，不可重复读解决了什么问题<a hidden class="anchor" aria-hidden="true" href="#脏读幻读不可重复读解决了什么问题">#</a></h1>
<p>脏读、幻读、可重复读是数据库中常见的隔离级别问题，它们分别解决了以下问题：</p>
<ol>
<li>
<p>脏读（Dirty Read）：当一个事务读取到另一个事务未提交的数据时，就产生了脏读。脏读可能导致数据的不一致性，因为读取到的数据可能会随时被其他事务修改或回滚。解决脏读的问题需要使用隔离级别为 Read Committed 或以上的级别，保证读取到的数据都是已经提交的数据。</p>
</li>
<li>
<p>幻读（Phantom Read）：当一个事务读取到其他事务插入的新数据时，就产生了幻读。幻读可能导致数据的不一致性，因为读取到的数据可能会随时被其他事务修改或删除。解决幻读的问题需要使用隔离级别为 Serializable 级别，保证读取的数据都是一致的。</p>
</li>
<li>
<p>可重复读（Repeatable Read）：当一个事务读取到其他事务修改的数据时，就产生了可重复读。可重复读可能导致数据的不一致性，因为读取到的数据可能会随时被其他事务修改或删除。解决可重复读的问题需要使用隔离级别为 Repeatable Read 或以上的级别，保证读取到的数据在事务提交之前不会被其他事务修改或删除。</p>
</li>
</ol>
<p>需要注意的是，提高隔离级别可以降低并发性能，因此需要根据实际情况来选择合适的隔离级别，同时需要注意数据库的锁机制和优化策略，以提高系统的性能和可用性。</p>
<h1 id="mysql-索引失效的几种方式">mysql 索引失效的几种方式<a hidden class="anchor" aria-hidden="true" href="#mysql-索引失效的几种方式">#</a></h1>
<ol>
<li>联合索引不满足最左匹配原则</li>
<li>使用了 select *</li>
<li>索引列参与运算</li>
<li>索引列参使用了函数示例</li>
<li>like 出现在开头 %abcd</li>
<li>使用 OR 操作</li>
</ol>
<h1 id="索引使用假设有一个联合索引abc分析以下查询情况">索引使用假设有一个联合索引(a,b,c)，分析以下查询情况：<a hidden class="anchor" aria-hidden="true" href="#索引使用假设有一个联合索引abc分析以下查询情况">#</a></h1>
<ol>
<li>b = 2 and a=1</li>
</ol>
<p>此查询条件可以很好地利用索引，因为索引的第二个字段是 b，第一个字段是 a，可以直接定位到满足条件的行。</p>
<ol start="2">
<li>b = 2 or a = 1</li>
</ol>
<p>这个查询条件不能很好地利用索引，因为这是一个或条件，需要同时扫描索引中 a=1 和 b=2 的记录，然后再将结果合并。因此，在这种情况下，数据库可能会选择使用全表扫描而不是索引扫描。</p>
<ol start="3">
<li>a = 1 and b &gt; 2</li>
</ol>
<p>此查询条件可以利用索引的前两个字段（a,b），可以直接定位到满足条件的行。</p>
<ol start="4">
<li>a &gt; 1 and b =2</li>
</ol>
<p>这个查询条件不能很好地利用索引，因为索引是按(a,b,c)的顺序排列的，而查询条件中第一个字段是 a，第二个字段是 b，第三个字段是 c，所以在 b=2 的情况下，需要扫描所有 a&gt;1 的记录，直到找到满足条件的记录。因此，在这种情况下，数据库可能会选择使用全表扫描而不是索引扫描。</p>
<h1 id="索引使用">索引使用<a hidden class="anchor" aria-hidden="true" href="#索引使用">#</a></h1>
<p>总之，联合索引(a,b,c)在不同的查询条件下，可以有不同的索引扫描效果。在实际应用中，建立联合索引的时候，需要根据实际情况和查询需求，选择合适的索引列顺序和索引列组合方式，以获得更好的索引扫描效果。</p>
<h1 id="mysql-优化">mysql 优化<a hidden class="anchor" aria-hidden="true" href="#mysql-优化">#</a></h1>
<p>MySQL 查询优化是提高 MySQL 数据库性能的重要手段之一，它可以优化查询语句、数据表结构、索引等方面，以提高查询效率和性能。具体来说，MySQL 查询优化可以从以下几个方面入手：</p>
<ol>
<li>
<p>优化查询语句：优化查询语句是提高 MySQL 查询性能的第一步，可以通过使用合适的查询语句、避免使用子查询、避免使用%通配符、缩小查询范围等方式来减少查询时间和资源消耗。</p>
</li>
<li>
<p>优化数据表结构：优化数据表结构可以提高 MySQL 数据库的查询性能和效率，可以通过合理设计数据表、避免使用过多的列、避免使用 TEXT 和 BLOB 类型等方式来提升 MySQL 数据库的性能。</p>
</li>
<li>
<p>优化索引：索引是提高 MySQL 查询性能的重要手段之一，可以通过创建合适的索引、避免过多的索引、避免使用过多的组合索引、避免使用不必要的索引等方式来提高 MySQL 查询性能。</p>
</li>
<li>
<p>避免全表扫描：全表扫描是 MySQL 查询性能低下的主要原因之一，可以通过使用索引、分区表、分页等方式来避免全表扫描，提高查询效率和性能。</p>
</li>
<li>
<p>调整服务器参数：调整服务器参数可以提高 MySQL 数据库的性能和效率，可以通过调整缓存大小、调整线程池、调整查询缓存等方式来提高 MySQL 数据库的性能和效率。</p>
</li>
</ol>
<p>总之，MySQL 查询优化是提高 MySQL 数据库性能和效率的重要手段之一，需要根据实际情况采取合适的优化方法和手段来提高 MySQL 数据库的性能和效率。</p>
<h1 id="索引的类型">索引的类型<a hidden class="anchor" aria-hidden="true" href="#索引的类型">#</a></h1>
<p>在数据库中，索引是一种特殊的数据结构，可以加快查询操作的速度。常见的索引类型包括以下几种：</p>
<ol>
<li>
<p>B-Tree 索引：B-Tree 索引是一种最常见的索引类型，适用于范围查找、等值查找等操作。B-Tree 索引可以快速定位到指定的记录，同时支持多列索引和前缀索引。</p>
</li>
<li>
<p>Hash 索引：Hash 索引是一种基于哈希表的索引类型，适用于只有等值查找操作的场景。Hash 索引可以快速定位到指定的记录，但不支持范围查找和排序操作。</p>
</li>
<li>
<p>Full-Text 索引：Full-Text 索引是一种用于全文搜索的索引类型，适用于文本字段的搜索。Full-Text 索引可以在搜索中使用自然语言查询、通配符、布尔运算等操作，提供更加灵活的搜索功能。</p>
</li>
<li>
<p>R-Tree 索引：R-Tree 索引是一种用于空间数据的索引类型，适用于地理信息、图像、音频等空间数据的查询。R-Tree 索引可以快速定位到指定的空间数据，同时支持范围查找和空间关系查询。</p>
</li>
<li>
<p>Bitmap 索引：Bitmap 索引是一种基于位图的索引类型，适用于低基数列的查询。Bitmap 索引可以将每个唯一值映射为一个位图，可以快速定位到指定的记录，同时支持多列索引和位图合并等操作。</p>
</li>
</ol>
<p>总之，不同类型的索引适用于不同的场景和查询操作，需要根据实际情况选择合适的索引类型来提高查询效率和性能。</p>
<h1 id="红黑树">红黑树<a hidden class="anchor" aria-hidden="true" href="#红黑树">#</a></h1>
<p>红黑树是一种自平衡二叉查找树，每个节点有一个颜色属性：红或黑。红黑树满足以下特性：</p>
<p>每个节点要么是黑色，要么是红色。
根节点是黑色。
所有叶子节点（NIL 节点，空节点）是黑色。
如果一个节点是红色的，则它的两个子节点都是黑色的。
从任意节点到其每个叶子节点的所有路径包含相同数量的黑色节点。</p>
<h1 id="红黑树比-avl-树的优点">红黑树比 AVL 树的优点<a hidden class="anchor" aria-hidden="true" href="#红黑树比-avl-树的优点">#</a></h1>
<p>红黑树与 AVL 树都是自平衡二叉搜索树，但红黑树在实际应用中的优点如下：</p>
<ul>
<li>调整次数少：AVL 树每次插入或删除可能需要进行多次调整，而红黑树最多只需 3 次。</li>
<li>结构稳定：红黑树对于相同集合的数据，形成的结构是唯一的，而 AVL 树则可能有多种。</li>
<li>适用于读操作多的情况：AVL 树由于严格的平衡性，查找效率较高，适合读操作多的情况，而红黑树虽然平衡性较差，但是其维护平衡的代价小，更适合写操作多的场景。</li>
</ul>
<h1 id="数据库三大范式">数据库三大范式<a hidden class="anchor" aria-hidden="true" href="#数据库三大范式">#</a></h1>
<p>数据库的三大范式是为了消除数据冗余和提高数据完整性而制定的规则：</p>
<p>第一范式（1NF）：表的每一列都是不可分割的基本数据项，同一列中的值必须是相同类型，且唯一。</p>
<p>第二范式（2NF）：在 1NF 的基础上，所有非主属性（非码属性）完全依赖于主键（码）。即一个表只描述一件事情。</p>
<p>第三范式（3NF）：在 2NF 的基础上，消除传递依赖，非主属性之间不能存在依赖关系。</p>
<p><strong>第一范式（1NF）</strong></p>
<p>违反 1NF 的例子：
表格有一个“客户”字段，该字段中存储了客户的名字和地址。</p>
<table>
<thead>
<tr>
<th>客户</th>
</tr>
</thead>
<tbody>
<tr>
<td>张三, 北京</td>
</tr>
<tr>
<td>李四, 上海</td>
</tr>
</tbody>
</table>
<p>遵循 1NF 后：
将“客户”字段分割为“客户名字”和“客户地址”。</p>
<table>
<thead>
<tr>
<th>客户名字</th>
<th>客户地址</th>
</tr>
</thead>
<tbody>
<tr>
<td>张三</td>
<td>北京</td>
</tr>
<tr>
<td>李四</td>
<td>上海</td>
</tr>
</tbody>
</table>
<p><strong>第二范式（2NF）</strong></p>
<p>违反 2NF 的例子：</p>
<table>
<thead>
<tr>
<th>学号</th>
<th>课程</th>
<th>教室</th>
<th>老师</th>
</tr>
</thead>
<tbody>
<tr>
<td>1001</td>
<td>数学</td>
<td>A101</td>
<td>张三</td>
</tr>
<tr>
<td>1002</td>
<td>英语</td>
<td>B201</td>
<td>李四</td>
</tr>
</tbody>
</table>
<p>此表的主键是(学号, 课程)，但&quot;教室&quot;只依赖&quot;课程&quot;，&ldquo;老师&quot;也只依赖&quot;课程&rdquo;，不满足 2NF。</p>
<p>遵循 2NF 后：
拆成两个表，每个表都满足所有非主属性完全依赖于全部候选键。</p>
<p>学生选课表：</p>
<table>
<thead>
<tr>
<th>学号</th>
<th>课程</th>
</tr>
</thead>
<tbody>
<tr>
<td>1001</td>
<td>数学</td>
</tr>
<tr>
<td>1002</td>
<td>英语</td>
</tr>
</tbody>
</table>
<p>课程表：</p>
<table>
<thead>
<tr>
<th>课程</th>
<th>教室</th>
<th>老师</th>
</tr>
</thead>
<tbody>
<tr>
<td>数学</td>
<td>A101</td>
<td>张三</td>
</tr>
<tr>
<td>英语</td>
<td>B201</td>
<td>李四</td>
</tr>
</tbody>
</table>
<p><strong>第三范式（3NF）</strong></p>
<p>违反 3NF 的例子：</p>
<table>
<thead>
<tr>
<th>订单编号</th>
<th>商品编号</th>
<th>商品价格</th>
</tr>
</thead>
<tbody>
<tr>
<td>O001</td>
<td>G001</td>
<td>50</td>
</tr>
<tr>
<td>O002</td>
<td>G002</td>
<td>100</td>
</tr>
</tbody>
</table>
<p>此表中，“商品价格”直接依赖于“商品编号”，而不是“订单编号”。</p>
<p>遵循 3NF 后：
拆分为两张表，消除传递依赖。</p>
<p>订单表：</p>
<table>
<thead>
<tr>
<th>订单编号</th>
<th>商品编号</th>
</tr>
</thead>
<tbody>
<tr>
<td>O001</td>
<td>G001</td>
</tr>
<tr>
<td>O002</td>
<td>G002</td>
</tr>
</tbody>
</table>
<p>商品表：</p>
<table>
<thead>
<tr>
<th>商品编号</th>
<th>商品价格</th>
</tr>
</thead>
<tbody>
<tr>
<td>G001</td>
<td>50</td>
</tr>
<tr>
<td>G002</td>
<td>100</td>
</tr>
</tbody>
</table>
<h1 id="mysql-page-cache-技术">mysql page cache 技术<a hidden class="anchor" aria-hidden="true" href="#mysql-page-cache-技术">#</a></h1>
<p>MySQL 的 Page Cache 技术是一种基于内存的缓存技术，它可以将磁盘上的数据缓存在内存中，以加速数据库的读取操作。Page Cache 的实现原理是将磁盘上的数据分割成固定大小的页面（通常是 16KB），然后将这些页面缓存到内存中。</p>
<p>当 MySQL 需要读取数据时，它首先检查 Page Cache 中是否已经缓存了所需的页面。如果页面已经在 Page Cache 中，则 MySQL 可以直接从内存中读取数据，从而避免了从磁盘上读取数据的开销。如果页面不在 Page Cache 中，则 MySQL 会从磁盘上读取数据并将其存储到 Page Cache 中，以便以后的读取操作可以更快地完成。</p>
<p>Page Cache 技术可以显著提高 MySQL 的读取性能，特别是对于那些需要频繁读取的数据。然而，它也有一些限制，例如缓存的数据量受限于可用内存的大小，而且 Page Cache 中的数据不会随着数据库的更新而自动更新，需要手动调用 MySQL 的刷新函数才能更新。因此，在使用 Page Cache 技术时需要仔细评估内存使用和缓存更新的策略，以确保系统的性能和稳定性。</p>
<h1 id="mysql-如何实现-mvcc-的">mysql 如何实现 MVCC 的<a hidden class="anchor" aria-hidden="true" href="#mysql-如何实现-mvcc-的">#</a></h1>
<p>主要是两个
版本号：每个数据行都有一个版本号，用于表示该数据行的版本信息。在 MySQL 中，每个事务都有一个唯一的事务 ID，每次对数据行进行修改时，都会创建一个新的版本，并将该版本与当前事务 ID 绑定。</p>
<p>快照：每个事务都会创建一个独立的快照，用于保存该事务开始时数据库中所有数据行的版本信息。在 MySQL 中，快照是通过事务开始时的系统版本号来实现的。</p>


        </div>

        <footer class="post-footer">
            
<nav class="paginav">
  <a class="prev" href="https://www.junshou.top/posts/cs/webserver/">
    <span class="title">« 上一页</span>
    <br>
    <span>webserver</span>
  </a>
  <a class="next" href="https://www.junshou.top/posts/cs/os/">
    <span class="title">下一页 »</span>
    <br>
    <span>operating system</span>
  </a>
</nav>

        </footer>
    </div>

<style>
    .comments_details summary::marker {
        font-size: 20px;
        content: '👉展开评论';
        color: var(--content);
    }
    .comments_details[open] summary::marker{
        font-size: 20px;
        content: '👇关闭评论';
        color: var(--content);
    }
</style>


<div>
    <details class="comments_details">
        <summary style="cursor: pointer; margin: 50px 0 20px 0;width: 130px;">
            <span style="font-size: 20px;color: var(--content);">...</span>
        </summary>
        <div id="tcomment"></div>
    </details>
    <script src="https://cdn.staticfile.org/twikoo//twikoo.all.min.js">
    </script>
    <script>
        twikoo.init({
            envId:  null ,
        el: "#tcomment",
            lang: 'zh-CN',
            region:  null ,
        path: window.TWIKOO_MAGIC_PATH||window.location.pathname,
        })
    </script>
</div>
</article>
</main>

<footer class="footer">
    <span>
        Copyright
        &copy;
        -2023
        <a href="https://www.junshou.top/" style="color:#939393;">chx9</a>
        All Rights Reserved
    </span>
    <a href="https://beian.miit.gov.cn/" target="_blank" style="color:#939393;"></a>&nbsp;
    <span>
        <a target="_blank" href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=null"
           style="display:inline-block;text-decoration:none;height:20px;color:#939393;">
            <img src="" style="float:left;margin: 0px 5px 0px 0px;"/>
            
        </a>
    </span>
    <span id="busuanzi_container">
        <span class="fa fa-user"></span> <span id="busuanzi_value_site_uv"></span>
        <span class="fa fa-eye"></span> <span id="busuanzi_value_site_pv"></span>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <span class="topInner">
        <svg class="topSvg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
            <path d="M12 6H0l6-6z"/>
        </svg>
        <span id="read_progress"></span>
    </span>
</a>

<script>
    document.addEventListener('scroll', function (e) {
        const readProgress = document.getElementById("read_progress");
        const scrollHeight = document.documentElement.scrollHeight;
        const clientHeight = document.documentElement.clientHeight;
        const scrollTop = document.documentElement.scrollTop || document.body.scrollTop;
        readProgress.innerText = ((scrollTop / (scrollHeight - clientHeight)).toFixed(2) * 100).toFixed(0);
    })
</script>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });
</script>
<script>
    let mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 200 || document.documentElement.scrollTop > 200) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };
</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        (function() {
            document.cookie = "change-themes" + "="+ escape ("false");
        })()

        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    });
</script>

<script>
    document.body.addEventListener('copy', function (e) {
        if (window.getSelection().toString() && window.getSelection().toString().length > 50) {
            let clipboardData = e.clipboardData || window.clipboardData;
            if (clipboardData) {
                e.preventDefault();
                let htmlData = window.getSelection().toString() 
                let textData = window.getSelection().toString() 
                clipboardData.setData('text/html', htmlData);
                clipboardData.setData('text/plain', textData);
                
                
                
                
                
                
                
                
                
                
            }
        }
    });
</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;
        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerText = '📄复制';

        function copyingDone() {
            copybutton.innerText = '👌🏻已复制!';
            setTimeout(() => {
                copybutton.innerText = '📄复制';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                let text = codeblock.textContent 
                
                
                
                navigator.clipboard.writeText(text);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) {}
            selection.removeRange(range);
        });

        let language = codeblock.className.replaceAll("language-", "")
        let macTool = document.createElement("div")
        let macTool1 = document.createElement("div")
        let macTool2 = document.createElement("div")
        let macTool3 = document.createElement("div")
        let languageType = document.createElement("div")
        languageType.innerText = language
        
        
        
        
        languageType.setAttribute('class', 'language-type')
        macTool.appendChild(macTool1)
        macTool.appendChild(macTool2)
        macTool.appendChild(macTool3)
        macTool.appendChild(languageType)

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
            container.appendChild(macTool)
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
            container.appendChild(macTool)
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
            container.appendChild(macTool)
        }
    });
</script>
</body>

</html>
